{% extends "layout.html" %}

{% block pageTitle %}
    GOV.UK Prototype Kit
{% endblock %}

{% block content %}

    <p>PV: {{ pageVariant }}</p>
    <p>FT: {{ filterType }}</p>
    <p>RT: {{ resultsType }}</p>

    <div class="govuk-grid-row filter-type-2-row">

        <div class="govuk-grid-column-two-thirds">

            {% include './includes/search.html' %}

        </div>

        {% if filterType === 2 %}
            <div class="govuk-grid-column-one-third filter-type-2">

                <div class="defra-filter--action" style="">
                    <button id="defra-filter--button" class="govuk-button govuk-button--secondary govuk-!-margin-top-6 "
                            type="button" aria-expanded="false"><span
                                class="defra-filter--button-content">Show filters</span><span
                                class="defra-filter__icon"></span>
                    </button>
                </div>

            </div>
        {% endif %}

    </div>

    {% if filterType === 2 %}
        <div class="govuk-grid-row">
            {% include './includes/search-filter-2.html' %}
        </div>
        <div class="govuk-grid-row">
    {% else %}
        <div class="govuk-grid-row search-container">

        <div class="govuk-grid-column-one-third">

            {% include './includes/search-filter.html' %}

        </div>

    {% endif %}

    {% if resultsType === 2 %}

        <div class="govuk-grid-column-full">

        {% include './includes/search-results-2.html' %}

    {% else %}

        <div class="govuk-grid-column-two-thirds">

        {% include './includes/search-results-1.html' %}

    {% endif %}

    {% include './includes/pagination.html' %}

        </div>

    </div>

    <script type="text/javascript">
        window.addEventListener('load', function() {
            var count = $('.govuk-table__row').length - 1
            // show hide content
            $('.derfa-filter--content').hide()
            $('.defra-filter--action').show()
            $('#js-case-count').text(count);
            if (count == 0) {
                $('.govuk-table').hide()
            }
            $('.derfa-filter--content').hide()
            $('#defra-filter--button').on("click", function() {
                if (!$('.defra-filter--action').hasClass('defra-filter--open')) {
                    $('.defra-filter--content').show().focus()
                    $('.defra-filter--action').addClass('defra-filter--open')
                    $('#defra-filter--button').attr('aria-expanded', 'true');
                    $(".defra-filter--button-content").text('Hide filters')

                } else {
                    $('.defra-filter--content').hide()
                    $('.defra-filter--action').removeClass('defra-filter--open')
                    $('#defra-filter--button').attr('aria-expanded', 'false');
                    $(".defra-filter--button-content").text('Show filters')
                }
            })
        })
    </script>

{% endblock %}